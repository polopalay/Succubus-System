carn_enslave_interaction = {
	desc = carn_enslave_interaction.desc
	category = interaction_category_prison
	common_interaction = yes
	cooldown_against_recipient = { years = 3 }
	is_shown = {
		scope:recipient = {
			OR = {
				is_vassal_of = scope:actor
				is_courtier_of = scope:actor
				is_imprisoned_by = scope:actor
			}
			NOR = {
				has_trait = slave
				has_relation_slave = scope:actor
			}
		}
	}
	is_valid_showing_failures_only = {
		scope:recipient = { is_busy_in_events_localised = yes }
		scope:recipient = {
			custom_description = {
				text = "currently_being_tortured"
				NOT = { has_character_flag = is_being_tortured }
			}
		}
		scope:recipient = {
			custom_description = {
				text = "carn_slavery_is_illegal"
				OR = {
					scope:actor = { has_trait = seed_of_destruction }
					scope:recipient = { is_lowborn = yes }
					AND = {
						NOT = {
							scope:actor.faith = {
								has_doctrine = carn_doctrine_same_slavery_crime
								faith_hostility_level = {
									target = scope:recipient.faith
									value < faith_hostile_level
								}
							}
						}
						NOT = {
							scope:actor.faith = {
								has_doctrine = carn_doctrine_other_slavery_crime
								faith_hostility_level = {
									target = scope:recipient.faith
									value >= faith_hostile_level
								}
							}
						}
					}
				}
			}
		}
	}
	ai_accept = {
		base = -50
		opinion_modifier = { opinion_target = scope:actor who = scope:recipient multiplier = 1 }
		modifier = {
			add = 1000
			desc = carn_wants_to_be_your_slave
			scope:recipient = {
				OR = {
					has_character_flag = carn_wants_to_be_a_slave
					has_trait_with_flag = carn_wants_to_be_a_slave
					has_opinion_modifier = {
						target = scope:actor
						modifier = carn_wants_to_be_your_slave_opinion
					}
				}
			}
		}
		modifier = { add = { value = scope:actor.diplomacy } }
		modifier = { add = 50 scope:recipient = { has_trait = contrite } }
		modifier = { add = 20 scope:recipient = { has_trait = humble } }
		modifier = { add = -100 scope:recipient = { has_trait = arrogant } }
		modifier = { add = -100 scope:recipient = { has_trait = ambitious } }
		modifier = { desc = carn_enslave_recipient_is_noble add = -10 scope:recipient = { is_lowborn = no } }
		modifier = { add = -50 scope:recipient = { is_ruler = yes } }
		modifier = { desc = carn_enslave_you_have_no_reason add = -50 scope:actor = { NOT = { has_execute_reason = scope:recipient } } }
		modifier = { desc = INTIMIDATED_REASON add = 10 scope:recipient = { has_dread_level_towards = { target = scope:actor level = 1 } } }
		modifier = { desc = COWED_REASON add = 20 scope:recipient = { has_dread_level_towards = { target = scope:actor level = 2 } } }
	}
	auto_accept = {
		scope:recipient = { is_imprisoned_by = scope:actor }
	}
	on_accept = {
		carn_enslave_effect = { SLAVE = scope:recipient OWNER = scope:actor DRAMA = yes }
	}
	ai_targets = {
		ai_recipients = prisoners
		ai_recipients = courtiers
		ai_recipients = vassals
	}
	ai_frequency = 12
	ai_potential = { is_at_war = no }
	ai_will_do = {
		base = 0
		opinion_modifier = { opinion_target = scope:recipient multiplier = -1 }
		ai_value_modifier = { ai_compassion = -1 }
		modifier = { scope:actor = { has_trait = seed_of_destruction } scope:recipient = { is_ruler = no is_ai = yes } add = 2000 }
		modifier = { scope:actor = { faith.religion = religion:satanic_religion } add = 20 }
		modifier = { scope:recipient = { has_trait = peasant_leader } add = 100 }
		modifier = { scope:recipient = { has_trait = populist_leader } add = 100 }
		modifier = { add = -20 ai_compassion >= low_positive_ai_value scope:recipient = { is_adult = no } }
		modifier = { add = -20 scope:actor.dynasty = scope:recipient.dynasty }
		modifier = { add = -20 is_close_or_extended_family_of = scope:recipient }
		modifier = { add = -20 is_close_family_of = scope:recipient }
		modifier = {
			add = 20
			scope:actor = {
				has_execute_reason = scope:recipient
				ai_greed > 0
				any_heir_title = {
					exists = holder
					holder = scope:recipient
					place_in_line_of_succession = {
						target = scope:actor
						value > 2
					}
				}
			}
		}
		modifier = {
			add = 20
			scope:actor = {
				ai_vengefulness >= medium_positive_ai_value
				OR = {
					has_execute_reason = scope:recipient
					has_relation_rival = scope:recipient
					has_relation_nemesis = scope:recipient
					scope:recipient = {
						is_spouse_of = scope:actor
						exposed_cheating_on_spouse_trigger = { SPOUSE = scope:actor }
					}
				}
			}
		}
		modifier = {
			add = 35
			scope:actor = {
				ai_greed >= very_high_positive_ai_value
				any_heir_title = {
					exists = holder
					holder = scope:recipient
					place_in_line_of_succession = {
						target = scope:actor
						value > 2
					}
				}
			}
		}
		modifier = {
			add = 35
			scope:actor = {
				ai_vengefulness >= very_high_positive_ai_value
				OR = {
					has_execute_reason = scope:recipient
					has_relation_rival = scope:recipient
					has_relation_nemesis = scope:recipient
					scope:recipient = {
						is_spouse_of = scope:actor
						exposed_cheating_on_spouse_trigger = { SPOUSE = scope:actor }
					}
				}
			}
		}
	}
}
